--[[ SHARED ]]AddCSLuaFile()ENT.Type = "anim"ENT.Category = "Barricades"ENT.PrintName = "Barricade"ENT.Author = "Senpai"function ENT:SetupDataTables()		self:NetworkVar("Float", 0, "EntHealth")end--[[ INIT_SV (SERVER) ]]if SERVER then		function ENT:Initialize()				self:SetModel("models/props_trenches/lapland02_128.mdl")				self:SetModelScale(1,1)		self:PhysicsInit(SOLID_VPHYSICS)		self:SetMoveType(MOVETYPE_NONE)				self:PhysicsDestroy()				self:DropToFloor()				self:SetAngles(Angle(0,90,0))				self.EntHealth = 400			end		function ENT:OnTakeDamage(dmg)	 		self:TakePhysicsDamage(dmg)	 		if(self.EntHealth <= 0) then return end 	 		self.EntHealth = self.EntHealth - dmg:GetDamage() 	 		if(self.EntHealth <= 0) then 						self:EmitSound("physics/metal/metal_chainlink_impact_soft"..math.random(1,3)..".wav")						dmg:GetInflictor():AddExp(Config["barricade-reward"])						self:Remove()							end			end		function ENT:Think()				self:SetEntHealth(self.EntHealth)			end		function ENT:Touch( toucher )			if toucher:IsValid() && toucher:IsPlayer() then					toucher:SetVelocity(Vector(math.random(1,50) ,math.random(1,500) ,math.random(0,-500) ))						if(toucher:Health() <= 0) then return end 	 			toucher:SetHealth(toucher:Health() - 1)						toucher:EmitSound("physics/metal/metal_chainlink_impact_soft"..math.random(1,3)..".wav")		 			if(toucher:Health() <= 0) then 							toucher:Kill()											end					end			end	end-- [[ INIT_CL (CLIENT) ]]if CLIENT then	local soil = Material( "materials/gui/british-icon.png", "noclamp" )	local maxhealth = 400	local smooth = 400	function ENT:Draw()		self:DrawModel()		if self:GetPos():Distance(LocalPlayer():GetPos()) < 350 then						-- angle --			local Ang = self:GetAngles()			Ang:RotateAroundAxis( Ang:Forward(), 90)			Ang:RotateAroundAxis( Ang:Right(), 0)						-- position --			local UpTranslate = 2 + math.sin(CurTime()) * 2 			local RightTranslate = 0			local ForwardTranslate = 10			cam.Start3D2D(self:GetPos() + self:GetUp() * 40 + self:GetRight() * RightTranslate + self:GetForward() * 30, Ang + Angle(0, 90, 0), 0.1)								surface.SetDrawColor(255,255,255, 255)				surface.SetMaterial( Material(  "materials/gui/exp-background3.png" ) )  --Use dir icon16/ for silkicons				surface.DrawTexturedRect(-250,0,500,100)								surface.SetDrawColor( 0, 0, 0, 255 )				surface.DrawRect( -230, 20, 460, 60 )								local wi = 460				local width = self:GetEntHealth()/maxhealth*(wi)				local width = math.Clamp(width, 0, wi)				smooth = math.Approach(smooth, width, 100*FrameTime())								surface.SetDrawColor( 90, 0, 0, 255 )				surface.DrawRect( -230, 20, smooth, 60 )								--draw.SimpleTextOutlined("Health:"..smooth, "Basic_Font_3D", 0, 0, Color(255, 255, 255, 255), TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER, 1, Color(0, 0, 0, 150))											cam.End3D2D()								end	endend
